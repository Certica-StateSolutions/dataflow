@model DataFlow.Models.Agent

@Html.AntiForgeryToken()
@Html.ValidationSummary(true, "", new { @class = "text-danger" })
<h4>Connection</h4>
<div class="form-group">
    <div class="col-sm-2">
        @Html.LabelFor(m => m.Name, new { @class = "control-label" })
    </div>
    <div class="col-sm-10">
        @Html.TextBoxFor(m => m.Name, new { @class = "form-control", type = "text", placeholder = "Name" })
    </div>
</div>
<div class="form-group">
    <div class="col-sm-2">
        @Html.LabelFor(m => m.Url, new { @class = "control-label" })
    </div>
    <div class="col-sm-10">
        @Html.TextBoxFor(m => m.Url, new { @class = "form-control", type = "text", placeholder = "Url" })
    </div>
</div>
<div class="form-group">
    <div class="col-sm-2">
        @Html.LabelFor(m => m.Username, new { @class = "control-label" })
    </div>
    <div class="col-sm-10">
        @Html.TextBoxFor(m => m.Username, new { @class = "form-control", type = "text", placeholder = "Username", autocomplete = "off" })
    </div>
</div>
<div class="form-group">
    <div class="col-sm-2">
        @Html.LabelFor(m => m.Password, new { @class = "control-label" })
    </div>
    <div class="col-sm-10">
        @Html.TextBoxFor(m => m.Password, new { @class = "form-control", type = "text", placeholder = "Password", autocomplete = "off" })
    </div>
</div>
<div class="form-group">
    <div class="col-sm-2">
        @Html.LabelFor(m => m.Directory, new { @class = "control-label" })
    </div>
    <div class="col-sm-10">
        @Html.TextBoxFor(m => m.Directory, new { @class = "form-control", type = "text", placeholder = "Directory" })
    </div>
</div>
<div class="form-group">
    <div class="col-sm-2">
        @Html.LabelFor(m => m.FilePattern, new { @class = "control-label" })
    </div>
    <div class="col-sm-10">
        @Html.TextBoxFor(m => m.FilePattern, new { @class = "form-control", type = "text", placeholder = "File Pattern" })
    </div>
</div>
<div class="form-group">
    <div class="col-sm-offset-2 col-sm-10">
        @Html.CheckBoxFor(m => m.Enabled) @Html.LabelFor(m => m.Enabled)

    </div>
</div>

<h4>Data Maps</h4>
<table id="tblAgentDataMaps" class="table table-striped table-hover table-bordered table-responsive">
    <thead>
        <tr>
            <td>Name</td>
            <td>Processing Order</td>
        </tr>
    </thead>
    <tbody>
        @foreach (var m in Model.DataMapAgents)
        {
            <tr>
                <td>@m.DataMap.Name</td>
                <td>@m.ProcessingOrder</td>
            </tr>
        }
    </tbody>
</table>

<div class="form-group row">
    <div class="col-xs-2">
        @Html.Label("Add Data Map", new { @class = "control-label", @for = "ddlDataMaps" })
    </div>
    <div class="col-xs-6">
        @Html.DropDownList("ddlDataMaps", (IEnumerable<SelectListItem>)ViewBag.DataMaps, new { @class = "form-control" })
    </div>
    <div class="col-xs-2">
        @{
            var lastProcessOrder = 0;

            if (Model.DataMapAgents.Any())
            {
                lastProcessOrder = Model.DataMapAgents.Max(x => x.ProcessingOrder);
            }
        }

        @Html.Hidden("dataMapAgentNextOrder", lastProcessOrder)
        <button id="btnAddMap" name="btnAddMap" type="submit" class="btn btn-default">Add Map</button>
    </div>
</div>

<h4>Schedule</h4>
<table id="tblAgentSchedule" class="table table-striped table-hover table-bordered table-responsive">
    <thead>
        <tr>
            <td>Day</td>
            <td>Hour</td>
            <td>Minute</td>
        </tr>
    </thead>
    <tbody>
        @foreach (var m in Model.AgentSchedules)
        {
        <tr>
            <td>@m.Day</td>
            <td>@(Convert.ToString(m.Hour).PadLeft(2, '0'))</td>
            <td>@(Convert.ToString(m.Minute).PadLeft(2, '0'))</td>
        </tr>
        }
    </tbody>
</table>

<div class="form-group row">
    <div class="col-xs-2">
        @Html.Label("Add Schedule", new { @class = "control-label", @for = "ddlDay" })
    </div>
    <div class="col-xs-2">
        <select id="ddlDay" name="ddlDay" class="form-control">
            <option value="">Select Day</option>
            @foreach (var i in Enumerable.Range(1, 7))
            {
                <option value="@i">@i</option>
            }
        </select>
    </div>
    <div class="col-xs-2">
        <select id="ddlHour" name="ddlHour" class="form-control">
            <option value="">Select Hour</option>
            @foreach (var i in Enumerable.Range(0, 24))
            {
                <option value="@i">@i</option>
            }
        </select>
    </div>
    <div class="col-xs-2">
        <select id="ddlMinute" name="ddlMinute" class="form-control">
            <option value="">Select Minute</option>
            @foreach (var i in Enumerable.Range(0, 60))
            {
                <option value="@i">@i</option>
            }
        </select>
    </div>
    <div class="col-xs-2">
        <button id="btnAddSchedule" name="btnAddSchedule" type="submit" class="btn btn-default">Add Schedule</button>
    </div>
</div>
<div class="form-group">
    <div class="col-sm-offset-2 col-sm-10">
        @Html.HiddenFor(m => m.Id)
        @Html.HiddenFor(m => m.Custom)
        @Html.HiddenFor(m => m.Queue)
        <button id="btnSubmit" type="submit" class="btn btn-primary">Save Agent</button>
    </div>
</div>